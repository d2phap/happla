/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={632:function(t){t.exports=(()=>{"use strict";var t={d:(o,e)=>{for(var n in e)t.o(e,n)&&!t.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:e[n]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};t.r(o),t.d(o,{Board:()=>s,InterpolationMode:()=>e});var e,n=function(){return(n=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++)for(var i in o=arguments[e])Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);return t}).apply(this,arguments)},i=function(t,o,e,n){return new(e||(e=Promise))((function(i,r){function s(t){try{h(n.next(t))}catch(t){r(t)}}function a(t){try{h(n.throw(t))}catch(t){r(t)}}function h(t){var o;t.done?i(t.value):(o=t.value,o instanceof e?o:new e((function(t){t(o)}))).then(s,a)}h((n=n.apply(t,o||[])).next())}))},r=function(t,o){var e,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=o.call(t,s)}catch(t){r=[6,t],n=0}finally{e=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};!function(t){t.Pixelated="pixelated",t.Auto="auto",t.CrispEdges="crisp-edges"}(e||(e={}));var s=function(){function t(t,o,i){this.isPointerDown=!1,this.moving=!1,this.arrowLeftDown=!1,this.arrowRightDown=!1,this.arrowUpDown=!1,this.arrowDownDown=!1,this.defaultOptions={imageRendering:e.Pixelated,allowZoom:!0,minZoom:.05,maxZoom:1e4,zoomFactor:1,panOffset:{x:0,y:0},allowPan:!0,onBeforeZoomChanged:function(){return{}},onAfterZoomChanged:function(){return{}},onAfterTransformed:function(){return{}},onAfterPanOffsetChanged:function(){return{}}},this.elBoard=t,this.elBoardContent=o,this.options=n(n({},this.defaultOptions),i||{}),this.domMatrix=new DOMMatrix,this.domMatrix.a=this.options.zoomFactor,this.domMatrix.d=this.options.zoomFactor,this.domMatrix.e=this.options.panOffset.x,this.domMatrix.f=this.options.panOffset.y,this.zoomDistance=this.zoomDistance.bind(this),this.moveDistance=this.moveDistance.bind(this),this.startMoving=this.startMoving.bind(this),this.stopMoving=this.stopMoving.bind(this),this.enable=this.enable.bind(this),this.disable=this.disable.bind(this),this.zoomTo=this.zoomTo.bind(this),this.panTo=this.panTo.bind(this),this.applyTransform=this.applyTransform.bind(this),this.waitForContentReady=this.waitForContentReady.bind(this),this.onMouseWheel=this.onMouseWheel.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.disable(),this.elBoardContent.style.transformOrigin="top left",this.elBoard.style.overflow="hidden"}return Object.defineProperty(t.prototype,"imageRendering",{get:function(){return this.options.imageRendering},set:function(t){this.options.imageRendering=t,this.elBoardContent.style.imageRendering=t},enumerable:!1,configurable:!0}),t.prototype.applyTransform=function(t){var o=this;return void 0===t&&(t=0),new Promise((function(e){if(o.elBoardContent.style.transform=""+o.domMatrix.toString(),t>0){var n="transform "+t+"ms ease, opacity "+t+"ms ease";o.elBoardContent.style.transition=n,setTimeout((function(){o.options.onAfterTransformed(o.domMatrix),e(void 0)}),t)}else o.elBoardContent.style.transition="",o.options.onAfterTransformed(o.domMatrix),e(void 0)}))},t.prototype.onMouseWheel=function(t){if(0!==t.deltaY){var o=t.deltaY<0?"up":"down",e=1+Math.abs(t.deltaY)/300,n="up"===o?e:1/e;this.zoomDistance(n,t.clientX,t.clientY)}},t.prototype.onPointerDown=function(t){0===t.button&&(this.isPointerDown=!0,this.options.panOffset.x=t.clientX,this.options.panOffset.y=t.clientY)},t.prototype.onPointerMove=function(t){this.isPointerDown&&(this.moveDistance(t.clientX-this.options.panOffset.x,t.clientY-this.options.panOffset.y),this.options.panOffset.x=t.clientX,this.options.panOffset.y=t.clientY)},t.prototype.onPointerUp=function(t){this.isPointerDown&&(this.isPointerDown=!1,this.options.panOffset.x+=t.clientX-this.options.panOffset.x,this.options.panOffset.y+=t.clientY-this.options.panOffset.y,this.options.onAfterPanOffsetChanged({x:this.domMatrix.e,y:this.domMatrix.f}))},t.prototype.onKeyDown=function(t){switch(t.key){case"ArrowLeft":this.arrowLeftDown=!0,this.moving||(this.moving=!0,this.startMoving());break;case"ArrowUp":this.arrowUpDown=!0,this.moving||(this.moving=!0,this.startMoving());break;case"ArrowRight":this.arrowRightDown=!0,this.moving||(this.moving=!0,this.startMoving());break;case"ArrowDown":this.arrowDownDown=!0,this.moving||(this.moving=!0,this.startMoving())}},t.prototype.onKeyUp=function(t){switch(t.key){case"ArrowLeft":this.arrowLeftDown=!1;break;case"ArrowUp":this.arrowUpDown=!1;break;case"ArrowRight":this.arrowRightDown=!1;break;case"ArrowDown":this.arrowDownDown=!1}[this.arrowLeftDown,this.arrowUpDown,this.arrowRightDown,this.arrowDownDown].every((function(t){return!t}))&&this.stopMoving()},t.prototype.moveDistance=function(t,o){void 0===t&&(t=0),void 0===o&&(o=0),this.domMatrix.e+=t,this.domMatrix.f+=o,this.applyTransform()},t.prototype.zoomDistance=function(t,o,e,n){if(this.options.allowZoom){this.options.zoomFactor*=t,this.options.zoomFactor=Math.min(Math.max(this.options.minZoom,this.options.zoomFactor),this.options.maxZoom),this.options.onBeforeZoomChanged(this.options.zoomFactor,{x:this.domMatrix.e,y:this.domMatrix.f});var i=(null!=o?o:this.elBoard.offsetLeft)-this.elBoard.offsetLeft,r=(null!=e?e:this.elBoard.offsetTop)-this.elBoard.offsetTop;this.domMatrix=(new DOMMatrix).translateSelf(i,r).scaleSelf(t).translateSelf(-i,-r).multiplySelf(this.domMatrix),this.options.onAfterZoomChanged(this.options.zoomFactor,{x:this.domMatrix.e,y:this.domMatrix.f}),this.applyTransform(n)}},t.prototype.startMoving=function(){var t=Math.ceil(this.elBoardContent.clientWidth/100),o=0,e=0;this.arrowLeftDown&&!this.arrowRightDown?o=t:!this.arrowLeftDown&&this.arrowRightDown&&(o=-t),this.arrowUpDown&&!this.arrowDownDown?e=t:!this.arrowUpDown&&this.arrowDownDown&&(e=-t),this.moveDistance(o,e),this.animationFrame=requestAnimationFrame(this.startMoving)},t.prototype.stopMoving=function(){cancelAnimationFrame(this.animationFrame),this.moving=!1},t.prototype.panTo=function(t,o){return i(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return this.domMatrix.e=t,this.domMatrix.f=o,[4,this.applyTransform(300)];case 1:return e.sent(),[2]}}))}))},t.prototype.zoomTo=function(t,o,e,n){return i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return this.options.zoomFactor=Math.min(Math.max(this.options.minZoom,t),this.options.maxZoom),this.options.onBeforeZoomChanged(this.options.zoomFactor,{x:this.domMatrix.e,y:this.domMatrix.f}),this.domMatrix.a=this.options.zoomFactor,this.domMatrix.d=this.options.zoomFactor,this.domMatrix.e=o||0,this.domMatrix.f=e||0,this.options.onAfterZoomChanged(this.options.zoomFactor,{x:this.domMatrix.e,y:this.domMatrix.f}),[4,this.applyTransform(n)];case 1:return i.sent(),[2]}}))}))},t.prototype.enable=function(){this.applyTransform(),this.elBoard.addEventListener("wheel",this.onMouseWheel,{passive:!0}),this.elBoard.addEventListener("pointerdown",this.onPointerDown),this.elBoard.addEventListener("pointerup",this.onPointerUp),this.elBoard.addEventListener("pointerleave",this.onPointerUp),this.elBoard.addEventListener("pointermove",this.onPointerMove),this.elBoard.addEventListener("keydown",this.onKeyDown),this.elBoard.addEventListener("keyup",this.onKeyUp)},t.prototype.disable=function(){this.elBoard.removeEventListener("mousewheel",this.onMouseWheel),this.elBoard.removeEventListener("pointerdown",this.onPointerDown),this.elBoard.removeEventListener("pointerup",this.onPointerUp),this.elBoard.removeEventListener("pointerleave",this.onPointerUp),this.elBoard.removeEventListener("pointermove",this.onPointerMove),this.elBoard.removeEventListener("keydown",this.onKeyDown),this.elBoard.removeEventListener("keyup",this.onKeyUp)},t.prototype.waitForContentReady=function(){return i(this,void 0,void 0,(function(){var t,o;return r(this,(function(e){switch(e.label){case 0:this.elBoardContent.style.opacity="0",t=this.elBoardContent.querySelectorAll("img"),o=Array.from(t),e.label=1;case 1:return o.some((function(t){return!t.complete}))?[4,(10,new Promise((function(t){return setTimeout(t,10)})))]:[3,3];case 2:return e.sent(),[3,1];case 3:return this.elBoardContent.style.opacity="1",[2]}}))}))},t}();return o})()}},o={};function e(n){var i=o[n];if(void 0!==i)return i.exports;var r=o[n]={exports:{}};return t[n].call(r.exports,r,r.exports,e),r.exports}e.n=t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},e.d=(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},e.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o),(()=>{"use strict";var t=e(632),o=document.getElementById("board"),n=document.getElementById("boardContent"),i=new t.Board(o,n,{});i.imageRendering=t.InterpolationMode.Pixelated,i.waitForContentReady().then((function(){return t=void 0,e=void 0,s=function(){var t,e,r,s,a,h,l;return function(t,o){var e,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=o.call(t,s)}catch(t){r=[6,t],n=0}finally{e=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(p){switch(p.label){case 0:return i.enable(),t=n.scrollWidth,e=n.scrollHeight,r=o.clientWidth/t,s=o.clientHeight/e,a=Math.min(r,s),h=(o.offsetWidth-t*a)/2,l=(o.offsetHeight-e*a)/2,console.log(h+", "+l),[4,i.zoomTo(a,h,l)];case 1:return p.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(o,n){function i(t){try{h(s.next(t))}catch(t){n(t)}}function a(t){try{h(s.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,a)}h((s=s.apply(t,e||[])).next())}));var t,e,r,s}))})()})();
//# sourceMappingURL=index.js.map