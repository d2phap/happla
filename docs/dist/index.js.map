{"version":3,"sources":["webpack://demo/@d2phap/happla/webpack/universalModuleDefinition","webpack://demo/@d2phap/happla/webpack/bootstrap","webpack://demo/webpack:/@d2phap/happla/webpack/runtime/define property getters","webpack://demo/webpack:/@d2phap/happla/webpack/runtime/hasOwnProperty shorthand","webpack://demo/webpack:/@d2phap/happla/webpack/runtime/make namespace object","webpack://demo/@d2phap/happla/src/modules/helpers.ts","webpack://demo/@d2phap/happla/src/modules/Board.ts","webpack://demo/webpack/bootstrap","webpack://demo/webpack/runtime/compat get default export","webpack://demo/webpack/runtime/define property getters","webpack://demo/webpack/runtime/hasOwnProperty shorthand","webpack://demo/./index.ts"],"names":["module","exports","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","InterpolationMode","Pixelated","Auto","CrispEdges","board","boardContent","options","isPointerDown","moving","arrowLeftDown","arrowRightDown","arrowUpDown","arrowDownDown","defaultOptions","imageRendering","allowZoom","minZoom","maxZoom","zoomFactor","panOffset","x","y","allowPan","onBeforeZoomChanged","onAfterZoomChanged","onAfterTransformed","onAfterPanOffsetChanged","this","elBoard","elBoardContent","domMatrix","DOMMatrix","a","d","e","f","zoomDistance","bind","moveDistance","startMoving","stopMoving","enable","disable","zoomTo","panTo","applyTransform","waitForContentReady","onMouseWheel","onPointerDown","onPointerUp","onPointerMove","onKeyDown","onKeyUp","style","transformOrigin","overflow","duration","Promise","resolve","transform","toString","transition","setTimeout","deltaY","direction","normalizedDeltaY","Math","abs","delta","clientX","clientY","button","event","every","keyDown","dx","dy","min","max","newX","offsetLeft","newY","offsetTop","translateSelf","scaleSelf","multiplySelf","speed","ceil","clientWidth","animationFrame","requestAnimationFrame","cancelAnimationFrame","factor","addEventListener","passive","removeEventListener","opacity","list","querySelectorAll","imgs","Array","from","some","i","complete","__webpack_module_cache__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","document","getElementById","Board","then","w","scrollWidth","h","scrollHeight","widthScale","heightScale","clientHeight","scale","offsetWidth","offsetHeight","console","log"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"@d2phap/happla\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@d2phap/happla\"] = factory();\n\telse\n\t\troot[\"@d2phap/happla\"] = factory();\n})(this, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\nexport interface IRect {\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n}\n\nexport const pause = (duration: number) => new Promise((resolve) => setTimeout(resolve, duration));\n\nexport const checkRectanglesIntersection = (rectangle1: IRect, rectangle2: IRect) => !(\n  rectangle2.left > rectangle1.right\n  || rectangle2.right < rectangle1.left\n  || rectangle2.top > rectangle1.bottom\n  || rectangle2.bottom < rectangle1.top\n);\n","import { pause } from './helpers';\n\nexport type ZoomEventFunction = (zoomFactor: number, point: {\n  x: number;\n  y: number;\n}) => void;\n\nexport type TransformEventFunction = (matrix: DOMMatrix) => void;\nexport type PanningEventFunction = ({ x, y }: { x: number, y: number }) => void;\n\nexport enum InterpolationMode {\n  Pixelated = 'pixelated',\n  Auto = 'auto',\n  CrispEdges = 'crisp-edges',\n}\n\nexport interface BoardOptions {\n  allowZoom?: boolean;\n  zoomFactor?: number;\n  minZoom?: number;\n  maxZoom?: number;\n\n  allowPan?: boolean;\n  panOffset?: { x: number, y: number };\n\n  imageRendering?: InterpolationMode;\n\n  onBeforeZoomChanged?: ZoomEventFunction;\n  onAfterZoomChanged?: ZoomEventFunction;\n  onAfterTransformed?: TransformEventFunction;\n  onAfterPanOffsetChanged?: PanningEventFunction;\n}\n\nexport class Board {\n  private elBoardContent: HTMLElement;\n  private elBoard: HTMLElement;\n  private domMatrix: DOMMatrix;\n  private isPointerDown = false;\n\n  private animationFrame: number;\n  private moving = false;\n  private arrowLeftDown = false;\n  private arrowRightDown = false;\n  private arrowUpDown = false;\n  private arrowDownDown = false;\n\n  private options: BoardOptions;\n  private defaultOptions: BoardOptions = {\n    imageRendering: InterpolationMode.Pixelated,\n\n    allowZoom: true,\n    minZoom: 0.05,\n    maxZoom: 10_000,\n    zoomFactor: 1,\n    panOffset: { x: 0, y: 0 },\n\n    allowPan: true,\n\n    onBeforeZoomChanged: () => ({}),\n    onAfterZoomChanged: () => ({}),\n    onAfterTransformed: () => ({}),\n    onAfterPanOffsetChanged: () => ({}),\n  };\n\n  constructor(board: HTMLElement, boardContent: HTMLElement, options?: BoardOptions) {\n    this.elBoard = board;\n    this.elBoardContent = boardContent;\n\n    this.options = {\n      ...this.defaultOptions,\n      ...options || {},\n    };\n\n    this.domMatrix = new DOMMatrix();\n    this.domMatrix.a = this.options.zoomFactor;\n    this.domMatrix.d = this.options.zoomFactor;\n    this.domMatrix.e = this.options.panOffset.x;\n    this.domMatrix.f = this.options.panOffset.y;\n\n    this.zoomDistance = this.zoomDistance.bind(this);\n    this.moveDistance = this.moveDistance.bind(this);\n    this.startMoving = this.startMoving.bind(this);\n    this.stopMoving = this.stopMoving.bind(this);\n\n    this.enable = this.enable.bind(this);\n    this.disable = this.disable.bind(this);\n    this.zoomTo = this.zoomTo.bind(this);\n    this.panTo = this.panTo.bind(this);\n    this.applyTransform = this.applyTransform.bind(this);\n    this.waitForContentReady = this.waitForContentReady.bind(this);\n\n    this.onMouseWheel = this.onMouseWheel.bind(this);\n    this.onPointerDown = this.onPointerDown.bind(this);\n    this.onPointerUp = this.onPointerUp.bind(this);\n    this.onPointerMove = this.onPointerMove.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n\n    this.disable();\n\n    this.elBoardContent.style.transformOrigin = 'top left';\n    this.elBoard.style.overflow = 'hidden';\n  }\n\n  // #region Getters & Setters\n  get imageRendering() {\n    return this.options.imageRendering;\n  }\n\n  set imageRendering(value: InterpolationMode) {\n    this.options.imageRendering = value;\n    this.elBoardContent.style.imageRendering = value;\n  }\n  // #endregion\n\n\n  // #region Private functions\n  private applyTransform(duration: number = 0) {\n    return new Promise((resolve) => {\n      this.elBoardContent.style.transform = `${this.domMatrix.toString()}`;\n\n      // apply animation\n      if (duration > 0) {\n        const transition = `transform ${duration}ms ease, opacity ${duration}ms ease`;\n        this.elBoardContent.style.transition = transition;\n\n        setTimeout(() => {\n          // raise event\n          this.options.onAfterTransformed(this.domMatrix);\n          resolve(undefined);\n        }, duration);\n      }\n      else {\n        this.elBoardContent.style.transition = '';\n\n        // raise event\n        this.options.onAfterTransformed(this.domMatrix);\n        resolve(undefined);\n      }\n    });\n  }\n\n  private onMouseWheel(e: WheelEvent) {\n    // ignore horizontal scroll events\n    if (e.deltaY === 0) {\n      return;\n    }\n\n    const direction = e.deltaY < 0 ? 'up' : 'down';\n    const normalizedDeltaY = 1 + Math.abs(e.deltaY) / 300; // speed\n    const delta = direction === 'up' ? normalizedDeltaY : 1 / normalizedDeltaY;\n\n    this.zoomDistance(delta, e.clientX, e.clientY);\n  }\n\n  private onPointerDown(e: PointerEvent) {\n    // ignore right clicks\n    if (e.button !== 0) {\n      return;\n    }\n\n    this.isPointerDown = true;\n\n    // We get the pointer position on click so we can get the value once the user starts to drag\n    this.options.panOffset.x = e.clientX;\n    this.options.panOffset.y = e.clientY;\n  }\n\n  private onPointerMove(event: PointerEvent) {\n    // Only run this function if the pointer is down\n    if (!this.isPointerDown) {\n      return;\n    }\n\n    this.moveDistance(\n      event.clientX - this.options.panOffset.x,\n      event.clientY - this.options.panOffset.y,\n    );\n\n    this.options.panOffset.x = event.clientX;\n    this.options.panOffset.y = event.clientY;\n  }\n\n  private onPointerUp(e: PointerEvent) {\n    if (!this.isPointerDown) {\n      return;\n    }\n\n    this.isPointerDown = false;\n\n    this.options.panOffset.x += e.clientX - this.options.panOffset.x;\n    this.options.panOffset.y += e.clientY - this.options.panOffset.y;\n\n    this.options.onAfterPanOffsetChanged({\n      x: this.domMatrix.e,\n      y: this.domMatrix.f,\n    });\n  }\n\n  private onKeyDown(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'ArrowLeft':\n        this.arrowLeftDown = true;\n        if (!this.moving) {\n          this.moving = true;\n          this.startMoving();\n        }\n        break;\n      case 'ArrowUp':\n        this.arrowUpDown = true;\n        if (!this.moving) {\n          this.moving = true;\n          this.startMoving();\n        }\n        break;\n      case 'ArrowRight':\n        this.arrowRightDown = true;\n        if (!this.moving) {\n          this.moving = true;\n          this.startMoving();\n        }\n        break;\n      case 'ArrowDown':\n        this.arrowDownDown = true;\n        if (!this.moving) {\n          this.moving = true;\n          this.startMoving();\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  private onKeyUp(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'ArrowLeft':\n        this.arrowLeftDown = false;\n        break;\n      case 'ArrowUp':\n        this.arrowUpDown = false;\n        break;\n      case 'ArrowRight':\n        this.arrowRightDown = false;\n        break;\n      case 'ArrowDown':\n        this.arrowDownDown = false;\n        break;\n      default:\n        break;\n    }\n\n    if ([\n      this.arrowLeftDown,\n      this.arrowUpDown,\n      this.arrowRightDown,\n      this.arrowDownDown,\n    ].every((keyDown) => !keyDown)) {\n      this.stopMoving();\n    }\n  }\n\n  private moveDistance(x = 0, y = 0) {\n    // Update the transform coordinates with the distance from origin and current position\n    this.domMatrix.e += x;\n    this.domMatrix.f += y;\n\n    this.applyTransform();\n  }\n\n  private zoomDistance(delta: number, dx?: number, dy?: number, duration?: number) {\n    if (!this.options.allowZoom) {\n      return;\n    }\n\n    this.options.zoomFactor *= delta;\n\n    // restrict the zoom factor\n    this.options.zoomFactor = Math.min(\n      Math.max(this.options.minZoom, this.options.zoomFactor),\n      this.options.maxZoom,\n    );\n\n    // raise event onBeforeZoomChanged\n    this.options.onBeforeZoomChanged(this.options.zoomFactor, {\n      x: this.domMatrix.e,\n      y: this.domMatrix.f,\n    });\n\n    const newX = (dx ?? this.elBoard.offsetLeft) - this.elBoard.offsetLeft;\n    const newY = (dy ?? this.elBoard.offsetTop) - this.elBoard.offsetTop;\n\n    this.domMatrix = new DOMMatrix()\n      .translateSelf(newX, newY)\n      .scaleSelf(delta)\n      .translateSelf(-newX, -newY)\n      .multiplySelf(this.domMatrix);\n\n    // raise event onAfterZoomChanged\n    this.options.onAfterZoomChanged(this.options.zoomFactor, {\n      x: this.domMatrix.e,\n      y: this.domMatrix.f,\n    });\n\n    this.applyTransform(duration);\n  }\n\n  private startMoving() {\n    const speed = Math.ceil(this.elBoardContent.clientWidth / 100);\n    let x = 0;\n    let y = 0;\n\n    if (this.arrowLeftDown && !this.arrowRightDown) {\n      x = speed;\n    } else if (!this.arrowLeftDown && this.arrowRightDown) {\n      x = -speed;\n    }\n\n    if (this.arrowUpDown && !this.arrowDownDown) {\n      y = speed;\n    } else if (!this.arrowUpDown && this.arrowDownDown) {\n      y = -speed;\n    }\n\n    this.moveDistance(x, y);\n    this.animationFrame = requestAnimationFrame(this.startMoving);\n  }\n\n  private stopMoving() {\n    cancelAnimationFrame(this.animationFrame);\n    this.moving = false;\n  }\n  // #endregion\n\n\n  // #region Public functions\n  public async panTo(x: number, y: number) {\n    this.domMatrix.e = x;\n    this.domMatrix.f = y;\n\n    await this.applyTransform(300);\n  }\n\n  public async zoomTo(factor: number, x?: number, y?: number, duration?: number) {\n    // restrict the zoom factor\n    this.options.zoomFactor = Math.min(\n      Math.max(this.options.minZoom, factor),\n      this.options.maxZoom,\n    );\n\n    // raise event onBeforeZoomChanged\n    this.options.onBeforeZoomChanged(this.options.zoomFactor, {\n      x: this.domMatrix.e,\n      y: this.domMatrix.f,\n    });\n\n    // apply scale and translate value\n    this.domMatrix.a = this.options.zoomFactor;\n    this.domMatrix.d = this.options.zoomFactor;\n    this.domMatrix.e = x || 0;\n    this.domMatrix.f = y || 0;\n\n    // raise event onAfterZoomChanged\n    this.options.onAfterZoomChanged(this.options.zoomFactor, {\n      x: this.domMatrix.e,\n      y: this.domMatrix.f,\n    });\n\n    await this.applyTransform(duration);\n  }\n\n  public enable() {\n    this.applyTransform();\n\n    this.elBoard.addEventListener('wheel', this.onMouseWheel, { passive: true });\n\n    this.elBoard.addEventListener('pointerdown', this.onPointerDown);\n    this.elBoard.addEventListener('pointerup', this.onPointerUp);\n    this.elBoard.addEventListener('pointerleave', this.onPointerUp);\n    this.elBoard.addEventListener('pointermove', this.onPointerMove);\n\n    this.elBoard.addEventListener('keydown', this.onKeyDown);\n    this.elBoard.addEventListener('keyup', this.onKeyUp);\n  }\n\n  public disable() {\n    this.elBoard.removeEventListener('mousewheel', this.onMouseWheel);\n\n    this.elBoard.removeEventListener('pointerdown', this.onPointerDown);\n    this.elBoard.removeEventListener('pointerup', this.onPointerUp);\n    this.elBoard.removeEventListener('pointerleave', this.onPointerUp);\n    this.elBoard.removeEventListener('pointermove', this.onPointerMove);\n\n    this.elBoard.removeEventListener('keydown', this.onKeyDown);\n    this.elBoard.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  public async waitForContentReady() {\n    this.elBoardContent.style.opacity = '0';\n    const list = this.elBoardContent.querySelectorAll('img');\n    const imgs = Array.from(list);\n\n    while (imgs.some((i) => !i.complete)) {\n      // eslint-disable-next-line\n      await pause(10);\n    }\n\n    this.elBoardContent.style.opacity = '1';\n  }\n  // #endregion\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// @ts-nocheck\nimport { Board, InterpolationMode } from '@d2phap/happla';\n\nconst elBoard = document.getElementById('board');\nconst elBoardContent = document.getElementById('boardContent');\nconst board = new Board(elBoard, elBoardContent, {\n  //\n});\n\n\nboard.imageRendering = InterpolationMode.Pixelated;\nboard.waitForContentReady()\n  .then(async () => {\n    board.enable();\n\n    const w = elBoardContent.scrollWidth;\n    const h = elBoardContent.scrollHeight;\n\n    const widthScale = elBoard.clientWidth / w;\n    const heightScale = elBoard.clientHeight / h;\n    const scale = Math.min(widthScale, heightScale);\n\n    const x = (elBoard.offsetWidth - (w * scale)) / 2;\n    const y = (elBoard.offsetHeight - (h * scale)) / 2;\n\n    console.log(`${x}, ${y}`);\n    await board.zoomTo(scale, x, y);\n  });\n\n// const img = document.getElementById('img');\n\n// var poll = new Promise((resolve) => {\n//   setInterval(function () {\n//     if (img.naturalWidth) {\n//       clearInterval(poll);\n\n//       resolve({\n//         width: img.naturalWidth,\n//         height: img.naturalHeight,\n//       });\n//     }\n//   }, 5);\n// });\n\n// poll.then(async ({ width, height }) => {\n//   board.imageRendering = InterpolationMode.Pixelated;\n//   console.log(board.imageRendering);\n\n//   board.enable();\n\n//   const w = elBoardContent.scrollWidth;\n//   const h = elBoardContent.scrollHeight;\n\n//   const widthScale = elBoard.clientWidth / w;\n//   const heightScale = elBoard.clientHeight / h;\n//   const scale = Math.min(widthScale, heightScale);\n\n//   const x = (elBoard.offsetWidth - (w * scale)) / 2;\n//   const y = (elBoard.offsetHeight - (h * scale)) / 2;\n\n//   console.log(`${x}, ${y}`);\n//   await board.zoomTo(scale, x, y);\n\n//   // board.panTo(0, 0);\n// });\n\n"],"sourceRoot":""}